{"version":3,"sources":["dropzone_setup.coffee","image_loader.coffee","media.coffee"],"names":[],"mappings":"AAAA;EAAA,CAAC,CAAC,SAAS,CAAC,QAAZ,GACE;IAAA,SAAA,EAAW,MAAX;IACA,WAAA,EAAa,IADb;IAEA,aAAA,EAAe,wFAFf;IAGA,MAAA,EAAQ,SAAC,IAAD,EAAO,IAAP;MACN,IAAA,CAAA;IADM,CAHR;IAMA,IAAA,EAAM,SAAA;MACJ,IAAC,CAAA,EAAD,CAAI,SAAJ,EAAe,SAAC,IAAD,EAAO,uBAAP,EAAgC,OAAhC;AACb,YAAA;QAAA,UAAA,GAAa,CAAA,CAAE,cAAF;QACb,aAAA,GAAgB,UAAU,CAAC,IAAX,CAAgB,YAAhB;eAChB,CAAC,CAAC,IAAF,CACE;UAAA,GAAA,EAAK,aAAL;UACA,IAAA,EAAM,KADN;UAEA,OAAA,EAAS,SAAC,IAAD;AACP,gBAAA;YAAA,UAAU,CAAC,IAAX,CAAgB,IAAhB;YACA,OAAA,GAAU,IAAI,CAAC,KAAL,CAAA;YACV,CAAC,CAAC,SAAS,CAAC,KAAK,CAAC,OAAlB,CAA0B,CAAA,CAAE,kBAAF,CAA1B,EAAiD,OAAjD;UAHO,CAFT;UAOA,KAAA,EAAO,SAAC,GAAD,EAAM,UAAN,EAAkB,WAAlB;YACL,UAAU,CAAC,IAAX,CAAgB,4BAAA,GAA+B,GAAG,CAAC,YAAnC,GAAkD,MAAlD,GAA2D,mCAA3D,GAAiG,SAAjG,GAA6G,GAAG,CAAC,MAAjH,GAA0H,gBAA1H,GAA6I,GAAG,CAAC,UAAjJ,GAA8J,SAA9K;YACA,OAAO,CAAC,KAAR,CAAc,GAAd;UAFK,CAPP;SADF,EAYE,KAZF;MAHa,CAAf;IADI,CANN;;;EAwBF,QAAQ,CAAC,OAAO,CAAC,iBAAjB,GACE,CAAC,CAAC,SAAS,CAAC;;EACd,QAAQ,CAAC,OAAO,CAAC,qBAAjB,GACE,CAAC,CAAC,SAAS,CAAC;AA5Bd;;;ACCA;EAAA,CAAC,CAAC,SAAS,CAAC,SAAZ,GACE;IAAA,QAAA,EAAU,SAAA;AACR,UAAA;MAAA,KAAA,GAAQ;MACR,KAAK,CAAC,qBAAN,CAAA;MACA,KAAK,CAAC,oBAAN,CAAA;IAHQ,CAAV;IAKA,mBAAA,EAAqB,SAAC,IAAD,EAAO,SAAP,EAAkB,QAAlB;AAEnB,UAAA;MAAA,KAAA,GAAQ;MACR,MAAA,GAAS,IAAI;MACb,KAAA,GAAQ,IAAI;MAEZ,MAAM,CAAC,MAAP,GAAgB,SAAC,KAAD;QACd,KAAK,CAAC,GAAN,GAAY,KAAK,CAAC,MAAM,CAAC;QAGzB,KAAK,CAAC,MAAN,GAAe,SAAA;AACb,cAAA;UAAA,CAAA,GAAI,IAAC,CAAA;UACL,CAAA,GAAI,IAAC,CAAA;UACL,CAAA,GAAI,IAAI,CAAC;UACT,CAAA,GAAI,IAAI,CAAC;UACT,CAAA,GAAI,CAAE,CAAC,CAAC,IAAI,CAAC,IAAL,GAAY,IAAb,CAAH,GAAwB;UAC5B,UAAA,GAAa,QAAQ,CAAC;UACtB,CAAA,CAAE,IAAF,CAAO,CAAC,MAAR,CAAe,+HAAA,GAAkI,KAAK,CAAC,GAAxI,GAA8I,8IAA9I,GAA+R,CAAC,CAAC,OAAF,CAAU,CAAV,CAA/R,GAA8S,+BAA7T;UACA,KAAK,CAAC,mBAAN,CAA0B,CAA1B,EAA6B,SAA7B;QARa;QAWf,KAAK,CAAC,OAAN,GAAgB,SAAA;UACd,KAAA,CAAM,qBAAA,GAAwB,IAAI,CAAC,IAAnC;UACA,KAAK,CAAC,mBAAN,CAA0B,IAAI,CAAC,IAA/B,EAAqC,OAArC;UACA,SAAS,CAAC,GAAV,CAAc,IAAd;QAHc;MAfF;MAuBhB,MAAM,CAAC,aAAP,CAAqB,IAArB;IA7BmB,CALrB;IAoCA,kBAAA,EAAoB,SAAC,IAAD,EAAO,SAAP,EAAkB,QAAlB;AAElB,UAAA;MAAA,KAAA,GAAQ;MACR,MAAA,GAAS,IAAI;MACb,KAAA,GAAQ,IAAI;MAEZ,MAAM,CAAC,MAAP,GAAgB,SAAC,KAAD;QACd,KAAK,CAAC,GAAN,GAAY,KAAK,CAAC,MAAM,CAAC;QAGzB,KAAK,CAAC,MAAN,GAAe,SAAA;AACb,cAAA;UAAA,CAAA,GAAI,IAAC,CAAA;UACL,CAAA,GAAI,IAAC,CAAA;UACL,CAAA,GAAI,IAAI,CAAC;UACT,CAAA,GAAI,IAAI,CAAC;UACT,CAAA,GAAI,CAAE,CAAC,CAAC,IAAI,CAAC,IAAL,GAAY,IAAb,CAAH,GAAwB;UAC5B,UAAA,GAAa,QAAQ,CAAC;UACtB,CAAA,CAAE,cAAF,CAAiB,CAAC,IAAlB,CAAuB,KAAvB,EAA8B,KAAK,CAAC,GAApC,CAAwC,CAAC,GAAzC,CAA6C;YAAA,QAAA,EAAU,UAAV;WAA7C;UACA,KAAK,CAAC,sBAAN,CAA6B,CAA7B,EAAgC,SAAhC;UACA,KAAK,CAAC,UAAN,CAAiB,SAAjB;QATa;QAYf,KAAK,CAAC,OAAN,GAAgB,SAAA;UACd,KAAA,CAAM,qBAAA,GAAwB,IAAI,CAAC,IAAnC;UACA,KAAK,CAAC,sBAAN,CAA6B,IAAI,CAAC,IAAlC,EAAwC,IAAI,CAAC,IAA7C;UACA,KAAK,CAAC,UAAN,CAAiB,OAAjB;UACA,SAAS,CAAC,GAAV,CAAc,IAAd;QAJc;MAhBF;MAyBhB,MAAM,CAAC,aAAP,CAAqB,IAArB;IA/BkB,CApCpB;IAqEA,UAAA,EAAY,SAAC,OAAD;AACV,UAAA;MAAA,KAAA,GAAQ;MACR,MAAA,GAAU,CAAA,CAAE,gBAAF;MACV,MAAM,CAAC,WAAP,CAAmB,WAAnB;MACA,MAAM,CAAC,WAAP,CAAmB,aAAnB;MACA,IAAG,OAAA,KAAW,SAAd;QACE,MAAM,CAAC,WAAP,CAAmB,QAAnB;QACA,MAAM,CAAC,QAAP,CAAgB,OAAhB;eACA,MAAM,CAAC,GAAP,CAAW,mBAAX,CAA+B,CAAC,QAAhC,CAAyC,WAAzC,EAHF;OAAA,MAAA;QAKE,MAAM,CAAC,QAAP,CAAgB,QAAhB;QACA,MAAM,CAAC,WAAP,CAAmB,OAAnB;QACA,MAAM,CAAC,QAAP,CAAgB,aAAhB;QACA,MAAM,CAAC,GAAP,CAAW,mBAAX;eACA,MAAM,CAAC,IAAP,CAAY,OAAZ,EAAqB,SAAE,KAAF;UACnB,KAAK,CAAC,cAAN,CAAA;iBACA,CAAA,CAAE,IAAF,CAAO,CAAC,MAAR,CAAgB,KAAhB;QAFmB,CAArB,EATF;;IALU,CArEZ;IAuFA,mBAAA,EAAqB,SAAC,QAAD,EAAW,OAAX;AACnB,UAAA;MAAA,KAAA,GAAQ;MACR,SAAA,GAAY,CAAA,CAAE,YAAF;MACZ,IAAG,SAAS,CAAC,IAAV,CAAe,gBAAf,CAAgC,CAAC,MAAjC,GAA0C,CAA1C,IAA+C,SAAS,CAAC,IAAV,CAAe,kBAAf,CAAkC,CAAC,MAAnC,GAA4C,CAA9F;QACE,SAAS,CAAC,IAAV,CAAe,gBAAf,CAAgC,CAAC,MAAjC,CAAA;QACA,SAAS,CAAC,IAAV,CAAe,kBAAf,CAAkC,CAAC,MAAnC,CAAA,EAFF;;MAIA,IAAG,OAAA,KAAW,SAAd;eACE,CAAA,CAAE,YAAF,CAAe,CAAC,MAAhB,CAAuB,CAAA,CAAE,QAAF,CAAW,CAAC,QAAZ,CAAqB,WAArB,CAAiC,CAAC,GAAlC,CAAsC;UAC3D,WAAA,EAAa,MAD8C;UAE3D,SAAA,EAAW,cAFgD;UAG3D,aAAA,EAAe,QAH4C;UAI3D,aAAA,EAAe,KAJ4C;UAK3D,YAAA,EAAc,QAL6C;SAAtC,CAAvB,EADF;OAAA,MAAA;eAQE,CAAA,CAAE,YAAF,CAAe,CAAC,MAAhB,CAAuB,CAAA,CAAE,QAAF,CAAW,CAAC,QAAZ,CAAqB,aAArB,CAAmC,CAAC,IAApC,CAAyC,sBAAzC,CAAgE,CAAC,GAAjE,CAAqE;UAC1F,WAAA,EAAa,MAD6E;UAE1F,SAAA,EAAW,cAF+E;UAG1F,aAAA,EAAe,QAH2E;UAI1F,aAAA,EAAe,KAJ2E;UAK1F,YAAA,EAAc,QAL4E;SAArE,CAAvB,EARF;;IAPmB,CAvFrB;IA6GA,sBAAA,EAAwB,SAAC,QAAD,EAAW,OAAX;AACtB,UAAA;MAAA,KAAA,GAAQ;MACR,SAAA,GAAY,CAAA,CAAE,QAAF;MACZ,QAAA,GAAW,CAAA,CAAE,cAAF;MAEX,IAAG,QAAQ,CAAC,IAAT,CAAc,gBAAd,CAA+B,CAAC,MAAhC,GAAyC,CAAzC,IAA8C,QAAQ,CAAC,IAAT,CAAc,kBAAd,CAAiC,CAAC,MAAlC,GAA2C,CAA5F;QACE,OAAO,CAAC,GAAR,CAAY,QAAQ,CAAC,IAAT,CAAA,CAAZ;QACA,QAAQ,CAAC,IAAT,CAAc,gBAAd,CAA+B,CAAC,MAAhC,CAAA;QACA,QAAQ,CAAC,IAAT,CAAc,kBAAd,CAAiC,CAAC,MAAlC,CAAA,EAHF;;MAKA,IAAG,OAAA,KAAW,SAAd;eAEE,QAAQ,CAAC,KAAT,CAAe,CAAA,CAAE,QAAF,CAAW,CAAC,QAAZ,CAAqB,WAArB,CAAiC,CAAC,GAAlC,CAAsC;UACnD,WAAA,EAAa,MADsC;UAEnD,SAAA,EAAW,cAFwC;UAGnD,aAAA,EAAe,QAHoC;UAInD,aAAA,EAAe,KAJoC;UAKnD,YAAA,EAAc,QALqC;SAAtC,CAAf,EAFF;OAAA,MAAA;eASE,QAAQ,CAAC,KAAT,CAAe,CAAA,CAAE,QAAF,CAAW,CAAC,QAAZ,CAAqB,aAArB,CAAmC,CAAC,IAApC,CAAyC,kCAAzC,CAA4E,CAAC,GAA7E,CAAiF;UAC9F,WAAA,EAAa,MADiF;UAE9F,SAAA,EAAW,cAFmF;UAG9F,aAAA,EAAe,QAH+E;UAI9F,aAAA,EAAe,KAJ+E;UAK9F,YAAA,EAAc,QALgF;SAAjF,CAAf,EATF;;IAVsB,CA7GxB;IAwIA,qBAAA,EAAuB,SAAA;AACrB,UAAA;MAAA,KAAA,GAAQ;MACR,SAAA,GAAY,CAAA,CAAE,aAAF,CAAgB,CAAC,IAAjB,CAAsB,QAAtB,EAAgC,gCAAhC;MACZ,QAAA,GACE;QAAA,cAAA,EAAgB,GAAhB;QACA,kBAAA,EAAoB,MADpB;QAEA,gBAAA,EAAkB,gBAFlB;QAGA,gBAAA,EAAkB,4BAHlB;QAIA,UAAA,EAAY,EAJZ;QAKA,eAAA,EAAiB,oBALjB;QAMA,kBAAA,EAAoB,MANpB;QAOA,WAAA,EAAa,sDAPb;;MAUF,SAAS,CAAC,MAAV,CAAiB,SAAC,CAAD;AACf,YAAA;QAAA,CAAA,CAAE,IAAF,CAAO,CAAC,IAAR,CAAa,EAAb;QACA,IAAG,IAAC,CAAA,QAAJ;AACE,iBAAO,KAAA,CAAM,4BAAN,EADT;;QAEA,CAAA,GAAI,IAAC,CAAA;QACL,IAAG,CAAA,IAAM,CAAE,CAAA,CAAA,CAAX;UACE,CAAA,GAAI;AACJ,iBAAM,CAAA,GAAI,CAAC,CAAC,MAAZ;YACE,IAAG,CAAE,CAAA,CAAA,CAAE,CAAC,IAAI,CAAC,KAAV,CAAgB,SAAhB,CAAH;cACE,KAAK,CAAC,mBAAN,CAA0B,CAAE,CAAA,CAAA,CAA5B,EAAgC,SAAhC,EAA2C,QAA3C,EADF;aAAA,MAAA;cAEK,KAAK,CAAC,mBAAN,CAA0B,CAAE,CAAA,CAAA,CAAE,CAAC,IAA/B,EAAqC,OAArC,EAFL;;YAGA,CAAA;UAJF,CAFF;;MALe,CAAjB;IAdqB,CAxIvB;IAqKA,oBAAA,EAAsB,SAAA;AACpB,UAAA;MAAA,KAAA,GAAQ;MACR,WAAA,GAAc,CAAA,CAAE,OAAF,CAAU,CAAC,IAAX,CAAgB,QAAhB,EAA0B,gCAA1B;MACd,QAAA,GACE;QAAA,cAAA,EAAgB,GAAhB;QACA,kBAAA,EAAoB,MADpB;QAEA,gBAAA,EAAkB,iBAFlB;QAGA,uBAAA,EAAyB,KAHzB;QAIA,UAAA,EAAY,EAJZ;QAKA,eAAA,EAAiB,oBALjB;QAMA,kBAAA,EAAoB,MANpB;QAOA,WAAA,EAAa,sDAPb;;MAUF,WAAW,CAAC,MAAZ,CAAmB,SAAC,CAAD;AACjB,YAAA;QAAA,CAAA,CAAE,oBAAF,CAAuB,CAAC,IAAxB,CAA6B,EAA7B;QACA,IAAG,IAAC,CAAA,QAAJ;AACE,iBAAO,KAAA,CAAM,4BAAN,EADT;;QAEA,CAAA,GAAI,IAAC,CAAA;QACL,IAAG,CAAA,IAAM,CAAE,CAAA,CAAA,CAAX;UACE,CAAA,GAAI;AACJ,iBAAM,CAAA,GAAI,CAAC,CAAC,MAAZ;YACE,IAAG,CAAE,CAAA,CAAA,CAAE,CAAC,IAAI,CAAC,KAAV,CAAgB,SAAhB,CAAH;cACE,KAAK,CAAC,kBAAN,CAAyB,CAAE,CAAA,CAAA,CAA3B,EAA+B,WAA/B,EAA4C,QAA5C;cACA,KAAK,CAAC,sBAAN,CAA6B,CAAE,CAAA,CAAA,CAAE,CAAC,IAAlC,EAAwC,SAAxC,EAFF;aAAA,MAAA;cAKE,KAAK,CAAC,sBAAN,CAA6B,CAAE,CAAA,CAAA,CAAE,CAAC,IAAlC,EAAwC,OAAxC;cACA,KAAK,CAAC,UAAN,CAAiB,OAAjB;cACA,WAAW,CAAC,GAAZ,CAAgB,IAAhB,EAPF;;YASA,CAAA;UAVF,CAFF;;MALiB,CAAnB;IAdoB,CArKtB;;;EAuMF,CAAC,CAAC,SAAS,CAAC,SAAS,CAAC,QAAtB,CAAA;AAxMA;;;ACDA;EAAA,CAAC,CAAC,SAAS,CAAC,KAAZ,GACE;IAAA,OAAA,EAAS;MACP,OAAA,EAAS,IAAI,CAAC,KAAL,CAAA,CADF;MAEP,YAAA,EAAc,CAAA,CAAE,cAAF,CAFP;MAGP,UAAA,EAAY,CAAA,CAAE,kBAAF,CAHL;KAAT;IAKA,QAAA,EAAU,SAAA;AACR,UAAA;MAAA,KAAA,GAAQ;MACR,KAAK,CAAC,WAAN,CAAA;MACA,KAAK,CAAC,OAAN,CAAc,KAAK,CAAC,OAAO,CAAC,UAA5B,EAAwC,KAAK,CAAC,OAAO,CAAC,OAAtD;IAHQ,CALV;IAWA,WAAA,EAAa,SAAA;AACX,UAAA;MAAA,KAAA,GAAQ;aACR,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,OAAtB,CAA8B,SAAC,MAAD,EAAS,CAAT,EAAY,GAAZ;QAC5B,MAAM,CAAC,EAAP,CAAU,sCAAV,EAAkD,SAAC,KAAD;AAChD,kBAAO,KAAK,CAAC,IAAb;AAAA,iBACO,OADP;cAEI,IAAG,GAAG,CAAC,MAAJ,GAAa,CAAb,GAAiB,CAApB;gBACE,KAAK,CAAC,OAAO,CAAC,OAAQ,CAAA,CAAA,GAAI,CAAJ,CAAM,CAAC,IAA7B,CAAA;gBACA,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,MAA3B,CAAkC,IAAlC;gBACA,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,IAA3B,CAAgC,qCAAhC,EAHF;eAAA,MAAA;gBAKE,KAAK,CAAC,OAAO,CAAC,OAAQ,CAAA,CAAA,CAAE,CAAC,IAAzB,CAAA;gBACA,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,MAA3B,CAAkC,IAAlC;gBACA,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,IAA3B,CAAgC,qCAAhC,EAPF;;AADG;AADP,iBAUO,OAVP;cAWI,OAAO,CAAC,GAAR,CAAY,UAAZ;cACA,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,MAA3B,CAAkC,IAAlC;cACA,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,IAA3B,CAAgC,6BAAhC;AAbJ;QADgD,CAAlD;MAD4B,CAA9B;IAFW,CAXb;IA+BA,OAAA,EAAS,SAAC,UAAD,EAAa,OAAb;AACP,UAAA;MAAA,KAAA,GAAQ;MACR,EAAE,CAAC,OAAO,CAAC,IAAX,CAAgB,UAAhB,EAA4B,SAAC,IAAD,EAAO,CAAP,EAAU,GAAV;QAC1B,CAAA,CAAE,IAAF,CAAO,CAAC,IAAR,CAAa,mBAAb,EAAkC,CAAlC;MAD0B,CAA5B;aAGC,KAAK,CAAC,eAAN,CAAsB,UAAtB,EAAkC,OAAlC;IALM,CA/BT;IAqCA,eAAA,EAAiB,SAAC,UAAD,EAAa,OAAb;AACf,UAAA;MAAA,KAAA,GAAQ;aACR,UAAU,CAAC,IAAX,CAAgB,0CAAhB,CAA2D,CAAC,EAA5D,CAA+D,OAA/D,EAAwE,SAAC,KAAD;AACtE,YAAA;QAAA,SAAA,GAAY,CAAA,CAAE,KAAK,CAAC,MAAR,CAAe,CAAC,OAAhB,CAAwB,kBAAxB,CAA2C,CAAC,IAA5C,CAAiD,cAAjD;QACZ,OAAO,CAAC,OAAR,CAAgB,SAAC,MAAD,EAAS,CAAT,EAAY,GAAZ;UACd,MAAM,CAAC,IAAP,CAAA;UACA,OAAQ,CAAA,SAAA,CAAU,CAAC,IAAnB,CAAA;QAFc,CAAhB;MAFsE,CAAxE;IAFe,CArCjB;;;EAiDF,CAAC,CAAC,SAAS,CAAC,KAAK,CAAC,QAAlB,CAAA;AAlDA","file":"modules.js","sourcesContent":["$.StoreCamp.dropzone =\r\n  paramName: 'file'\r\n  maxFilesize: 1024\r\n  acceptedFiles: '.mp4,.mkv,.avi, image/*,application/pdf,.psd,.docx,.doc,.aac,.ogg,.oga,.mp3,.wav, .zip'\r\n  accept: (file, done) ->\r\n    done()\r\n    return\r\n  init: ->\r\n    @on 'success', (file, messageOrDataFromServer, myEvent) ->\r\n      folderBody = $('#folder-body')\r\n      folderBodyUrl = folderBody.data('folder-url')\r\n      $.ajax\r\n        url: folderBodyUrl\r\n        type: 'GET'\r\n        success: (data) ->\r\n          folderBody.html data\r\n          players = plyr.setup()\r\n          $.StoreCamp.media.reindex $('.media-plyr-item'), players\r\n          return\r\n        error: (xhr, textStatus, errorThrown) ->\r\n          folderBody.html '<b class=\\'text-warning\\'>' + xhr.responseJSON + '</b>' + '<br><code class=\\'text-warning\\'>' + 'code - ' + xhr.status + ' statusText - ' + xhr.statusText + '</code>'\r\n          console.error xhr\r\n          return\r\n        false\r\n    return\r\nDropzone.options.myAwesomeDropzone =\r\n  $.StoreCamp.dropzone\r\nDropzone.options.myAwesomeDropzoneBody =\r\n  $.StoreCamp.dropzone\r\n\r\n# ---\r\n# generated by js2coffee 2.2.0","# generate images live rendering\r\n$.StoreCamp.imageLoad =\r\n  activate: ->\r\n    _this = this\r\n    _this.initiateInstanceImage()\r\n    _this.initiateProfileImage()\r\n    return\r\n  renderInstanceImage: (file, fileinput, settings) ->\r\n# generate a new FileReader object\r\n    _this = this\r\n    reader = new FileReader\r\n    image = new Image\r\n\r\n    reader.onload = (_file) ->\r\n      image.src = _file.target.result\r\n      # url.createObjectURL(file);\r\n\r\n      image.onload = ->\r\n        w = @width\r\n        h = @height\r\n        t = file.type\r\n        n = file.name\r\n        s = ~ ~(file.size / 1024) / 1024\r\n        scaleWidth = settings.thumbnail_size\r\n        $('.p').append '<div class=\\'s-12 m-12 l-12 xs-12\\'><div class=\\'thumbnail\\' style=\\'background: #ffffff\\'><img class=\"img-responsive\" src=\\'' + image.src + '\\' /><div class=\\'caption\\' style=\\'position: absolute;right: 10px;top:10px;\\'> <h4  style=\\'background: black;padding: 4px; color: white\\'>' + s.toFixed(2) + ' Mb </h4></div></div> </div> '\r\n        _this.renderLabelFileName n, 'success'\r\n        return\r\n\r\n      image.onerror = ->\r\n        alert 'Invalid file type: ' + file.type\r\n        _this.renderLabelFileName file.name, \"error\"\r\n        fileinput.val null\r\n        return\r\n\r\n      return\r\n\r\n    reader.readAsDataURL file\r\n    return\r\n  renderProfileImage: (file, fileinput, settings) ->\r\n# generate a new FileReader object\r\n    _this = this\r\n    reader = new FileReader\r\n    image = new Image\r\n\r\n    reader.onload = (_file) ->\r\n      image.src = _file.target.result\r\n      # url.createObjectURL(file);\r\n\r\n      image.onload = ->\r\n        w = @width\r\n        h = @height\r\n        t = file.type\r\n        n = file.name\r\n        s = ~ ~(file.size / 1024) / 1024\r\n        scaleWidth = settings.thumbnail_size\r\n        $('.profile-img').attr(\"src\", image.src).css(position: 'relative')\r\n        _this.renderLabelFileProfile(n, \"success\")\r\n        _this.downButton(\"success\")\r\n        return\r\n\r\n      image.onerror = ->\r\n        alert 'Invalid file type: ' + file.type\r\n        _this.renderLabelFileProfile file.name, file.type\r\n        _this.downButton(\"error\")\r\n        fileinput.val null\r\n        return\r\n\r\n      return\r\n\r\n    reader.readAsDataURL file\r\n    return\r\n  downButton: (message) ->\r\n    _this = this\r\n    button =  $('#upload-button')\r\n    button.removeClass \"text-info\"\r\n    button.removeClass \"text-danger\"\r\n    if message == \"success\"\r\n      button.removeClass \"hidden\"\r\n      button.addClass \"block\"\r\n      button.val('to download press').addClass(\"text-info\")\r\n    else\r\n      button.addClass \"hidden\"\r\n      button.removeClass \"block\"\r\n      button.addClass(\"text-danger\")\r\n      button.val('wrong file format')\r\n      button.bind \"click\", ( event ) ->\r\n        event.preventDefault()\r\n        $(this).unbind( event )\r\n\r\n  renderLabelFileName: (filename, message)->\r\n    _this = this\r\n    fileLabel = $('.filelabel')\r\n    if fileLabel.find(\"span.text-info\").length > 0 || fileLabel.find(\"span.text-danger\").length > 0\r\n      fileLabel.find(\"span.text-info\").remove()\r\n      fileLabel.find(\"span.text-danger\").remove()\r\n\r\n    if message == \"success\"\r\n      $('.filelabel').append $('<span>').addClass('text-info').css({\r\n        'font-size': '100%'\r\n        'display': 'inline-block'\r\n        'font-weight': 'normal'\r\n        'margin-left': '1em'\r\n        'font-style': 'normal'})\r\n    else\r\n      $('.filelabel').append $('<span>').addClass('text-danger').text(\" format is not valid\").css({\r\n        'font-size': '100%'\r\n        'display': 'inline-block'\r\n        'font-weight': 'normal'\r\n        'margin-left': '1em'\r\n        'font-style': 'normal'})\r\n\r\n  renderLabelFileProfile: (filename, message)->\r\n    _this = this\r\n    fileLabel = $('.label')\r\n    ImgBlock = $('.profile-img')\r\n\r\n    if ImgBlock.next(\"span.text-info\").length > 0 || ImgBlock.next(\"span.text-danger\").length > 0\r\n      console.log(ImgBlock.next())\r\n      ImgBlock.next(\"span.text-info\").remove()\r\n      ImgBlock.next(\"span.text-danger\").remove()\r\n\r\n    if message == \"success\"\r\n\r\n      ImgBlock.after $('<span>').addClass('text-info').css({\r\n        'font-size': '100%'\r\n        'display': 'inline-block'\r\n        'font-weight': 'normal'\r\n        'margin-left': '1em'\r\n        'font-style': 'normal'})\r\n    else\r\n      ImgBlock.after $('<span>').addClass('text-danger').html(\"<br/><b>format is not valid </b>\").css({\r\n        'font-size': '100%'\r\n        'display': 'inline-block'\r\n        'font-weight': 'normal'\r\n        'margin-left': '1em'\r\n        'font-style': 'normal'})\r\n\r\n\r\n  initiateInstanceImage: ->\r\n    _this = this\r\n    fileinput = $('#fileupload').attr('accept', 'image/jpeg,image/png,image/gif')\r\n    settings =\r\n      thumbnail_size: 460\r\n      thumbnail_bg_color: '#ddd'\r\n      thumbnail_border: '1px solid #fff'\r\n      thumbnail_shadow: '0 0 0px rgba(0, 0, 0, 0.5)'\r\n      label_text: ''\r\n      warning_message: 'Not an image file.'\r\n      warning_text_color: '#f00'\r\n      input_class: 'custom-file-input button button-primary button-block'\r\n    # when the file is read it triggers the onload event above.\r\n    # handle input changes\r\n    fileinput.change (e) ->\r\n      $('.p').html ''\r\n      if @disabled\r\n        return alert('File upload not supported!')\r\n      F = @files\r\n      if F and F[0]\r\n        i = 0\r\n        while i < F.length\r\n          if F[i].type.match('image.*')\r\n            _this.renderInstanceImage F[i], fileinput, settings\r\n          else _this.renderLabelFileName F[i].name, \"error\"\r\n          i++\r\n      return\r\n    return\r\n\r\n  initiateProfileImage: ->\r\n    _this = this\r\n    fileElement = $('#file').attr('accept', 'image/jpeg,image/png,image/gif')\r\n    settings =\r\n      thumbnail_size: 100\r\n      thumbnail_bg_color: '#ddd'\r\n      thumbnail_border: '3px solid white'\r\n      thumbnail_border_radius: '3px'\r\n      label_text: ''\r\n      warning_message: 'Not an image file.'\r\n      warning_text_color: '#f00'\r\n      input_class: 'custom-file-input button button-primary button-block'\r\n    # when the file is read it triggers the onload event above.\r\n    # handle input changes\r\n    fileElement.change (e) ->\r\n      $('.profile-img-block').html ''\r\n      if @disabled\r\n        return alert('File upload not supported!')\r\n      F = @files\r\n      if F and F[0]\r\n        i = 0\r\n        while i < F.length\r\n          if F[i].type.match('image.*')\r\n            _this.renderProfileImage F[i], fileElement, settings\r\n            _this.renderLabelFileProfile F[i].name, \"success\"\r\n\r\n          else\r\n            _this.renderLabelFileProfile F[i].name, 'error'\r\n            _this.downButton(\"error\")\r\n            fileElement.val(null)\r\n\r\n          i++\r\n      return\r\n    return\r\n$.StoreCamp.imageLoad.activate()","$.StoreCamp.media =\r\n  options: {\r\n    players: plyr.setup()\r\n    playerStatus: $('.play-status')\r\n    mediaItems: $('.media-plyr-item')\r\n  }\r\n  activate: ->\r\n    _this = this\r\n    _this.mediaEvents()\r\n    _this.reindex(_this.options.mediaItems, _this.options.players)\r\n    return\r\n\r\n  mediaEvents: ->\r\n    _this = this\r\n    _this.options.players.forEach (player, i, arr) ->\r\n      player.on 'ready timeupdate pause ended playing', (event) ->\r\n        switch event.type\r\n          when 'ended'\r\n            if arr.length - 1 > i\r\n              _this.options.players[i + 1].play()\r\n              _this.options.playerStatus.toggle 2000\r\n              _this.options.playerStatus.html '<i class=\"fa  fa-step-forward\"></i>'\r\n            else\r\n              _this.options.players[0].play()\r\n              _this.options.playerStatus.toggle 2000\r\n              _this.options.playerStatus.html '<i class=\"fa  fa-step-forward\"></i>'\r\n          when 'pause'\r\n            console.log 'fuck off'\r\n            _this.options.playerStatus.toggle 2000\r\n            _this.options.playerStatus.html '<i class=\"fa fa-pause\"></i>'\r\n        return\r\n      return\r\n  reindex: (mediaItems, players) ->\r\n    _this = this\r\n    [].forEach.call mediaItems, (item, i, arr) ->\r\n      $(item).attr 'data-media-number', i\r\n      return\r\n     _this._triggerNewFile(mediaItems, players)\r\n  _triggerNewFile: (mediaItems, players) ->\r\n    _this = this\r\n    mediaItems.find('.plyr__controls button[data-plyr=\"play\"]').on 'click', (event) ->\r\n      audioItem = $(event.target).closest('.media-plyr-item').data('media-number')\r\n      players.forEach (player, i, arr) ->\r\n        player.stop()\r\n        players[audioItem].play()\r\n        return\r\n      return\r\n\r\n  # ---\r\n\r\n$.StoreCamp.media.activate()"]}